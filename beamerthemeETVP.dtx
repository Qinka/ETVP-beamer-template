% \iffalse meta-comment
% Local Variables:
% mode: doctex
% TeX-master: t
% End:
%<*install>
\input{docstrip.tex}
\keepsilent
\askforoverwritefalse
\preamble
---------:| ---------------------------------------------------------------
working:| Xidian University ETVP beamer theme.
 Author:| Johann Lee
 E-mail:| me@qinka.pro
License:| Released under the LaTeX Project Public License v1.3c or later
    See:| http://www.latex-project.org/lppl.txt
\endpreamble
\postamble
Copyright (C) 2021 by Johann Lee <me@qinka.pro>
---------------------------------------------------------------------------
This work may be distributed and/or modified under the
conditions of the LaTeX Project Public License, either version 1.3
of this license or (at your option) any later version.
The latest version of this license is in
	http://www.latex-project.org/lppl.txt
and version 1.3 or later is part of all distributions of LaTeX
version 2005/12/01 or later.

This work has the LPPL maintenance status `maintained'.

The Current Maintainer of this work is Johann Lee <me@qinka.pro>.

This work consists of the files \jobname.dtx and \jobname.ins
and the derived filebase \jobname.sty
\endpostamble

\usedir{tex/xelatex/xdu/etvp}
\generate{
	\file{\jobname.sty}{\from{\jobname.dtx}{style}}
	\file{\jobname.cfg}{\from{\jobname.dtx}{config}}
}
%</install>
%<install>\endbatchfile
%<*internal>
\usedir{source/xelatex/xdu/etvp}
\generate{
  \file{\jobname.ins}{\from{\jobname.dtx}{install}}
}
\nopreamble\nopostamble
%</internal>
% \iffalse
% \fi
%<*driver>
\ProvidesFile{beamerthemeETVP.dtx}[2021/04/29, Johann Lee<me@qinka.pro>, Ver.0.1.0]
%</driver>
%<style>\NeedsTeXFormat{LaTeX2e}[1999/12/01]
%<style>\ProvidesPackage{beamerthemeETVP}
%<config>\ProvidesFile{\jobname.cfg}
%<style|config>[2021/04/29, Johann Lee<me@qinka.pro>, Ver.0.1.1]
%<*driver>
\documentclass{ctexart}
^^A\usepackage{ctex}
^^A\EnableCrossrefs
^^A\CodelineIndex
^^A\RecordChanges
\begin{document}
  \DocInput{\jobname.dtx}
^^A  \PrintChanges
  \PrintIndex
\end{document}
%</driver>
% \fi
%
% \CheckSum{398}
%
% \CharacterTable
%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%   Digits        \0\1\2\3\4\5\6\7\8\9
%   Exclamation   \!     Double quote  \"     Hash (number) \#
%   Dollar        \$     Percent       \%     Ampersand     \&
%   Acute accent  \'     Left paren    \(     Right paren   \)
%   Asterisk      \*     Plus          \+     Comma         \,
%   Minus         \-     Point         \.     Solidus       \/
%   Colon         \:     Semicolon     \;     Less than     \<
%   Equals        \=     Greater than  \>     Question mark \?
%   Commercial at \@     Left bracket  \[     Backslash     \\
%   Right bracket \]     Circumflex    \^     Underscore    \_
%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%   Right brace   \}     Tilde         \~}
%
%
% \changes{<+version+>}{<+date+>}{Converted to DTX file}
%
% \GetFileInfo{\jobname.dtx}
% \title{The \textsf{\jobname} package}
% \author{<+author+> \\ \url{<+email+>}}
% \date{\fileversion~from \filedate}
%
% \maketitle
%
% \section{Introduction}
%
% Put text here.
%
% \section{Usage}
%
% Put text here.
%
% \StopEventually{}
%
% \section{Implementation}
%
% \iffalse
%<*style>
% \fi
%% The beamer theme of ETVP.
%%Copyright (C) 2021, Johann Lee <me@qinka.pro>(maintainer)
%
%  \begin{macro}
%    \begin{macrocode}
\RequirePackage{tikz}
\RequirePackage{ctex}

\definecolor{ETVPblue}{RGB}{91,155,213}
\definecolor{ETVPred}{RGB}{192,0,0}

\AtEndOfPackage{\input{beamerthemeETVP.cfg}}
\mode<presentation>
%    \end{macrocode}
% Settings
%    \begin{macrocode}
\setbeamercovered{dynamic}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{caption}[numbered]
%    \end{macrocode}
% Headline
%    \begin{macrocode}
\defbeamertemplate*{headline}{etvp headline}
{%
    \leavevmode%
    \hbox{\begin{tikzpicture}
        \useasboundingbox (0,0) rectangle(\paperwidth,.1\paperheight);
        \fill[color=ETVPblue] (0,.01\paperheight) rectangle (.025\paperwidth, .09\paperheight);
        \fill[color=ETVPblue] (.3\paperwidth,.01\paperheight) rectangle (\paperwidth, .09\paperheight);
        \node at (.16\paperwidth,.01\paperheight+.037\paperheight) {\includegraphics[width=0.273\paperwidth]{XDU_logo_light.pdf}};
        \node[color=white] at (\paperwidth-.35\paperheight,.01\paperheight+.037\paperheight) {\raggedleft \fontsize{.045\paperheight}{.08\paperheight} \kaishu 嵌入式技术与视觉处理研究中心};
    \end{tikzpicture}}%
}%
%    \end{macrocode}
% Frame title
%    \begin{macrocode}
\setbeamertemplate{frametitle}%
    {%
    \,\insertframetitle%
    \par\noindent%
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\paperwidth,0);
      \fill[color=ETVPred] (0,.019\paperheight) rectangle (.86\paperwidth, .02\paperheight);
      \fill[color=ETVPred] (0,0) rectangle (.46\paperwidth, .02\paperheight);
    \end{tikzpicture}%
    \par%
}%
%    \end{macrocode}
%
% Without headline
%    \begin{macrocode}
\newenvironment{withoutheadline}{
	\setbeamertemplate{headline}[default]
	\def\beamer@entrycode{\vspace*{-\headheight}}
}{}
%    \end{macrocode}
%
% End of implementation
%    \begin{macrocode}
\mode
<all>
%    \end{macrocode}
%  \end{macro}
%
%  \iffalse
%</style>
%  \fi
%
%<*config>
%</config>
%
%  \Finale
\endinput
